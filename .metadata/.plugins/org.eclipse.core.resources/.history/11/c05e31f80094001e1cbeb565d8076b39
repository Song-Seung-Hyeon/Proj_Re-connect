<%@ page import="java.sql.*"%>
<%@ page contentType="text/html;charset=UTF-8" language="java"%>
<%@ page import="java.io.*,java.util.*"%>
<%@ page import="javax.servlet.*,javax.servlet.http.*"%>
<%request.setCharacterEncoding("utf-8");%>


<%
// 사용자가 입력한 데이터 받아오기
String estimateDate = request.getParameter("consulting_date");
String estimateGender = request.getParameter("user_gender");
String estimateName = request.getParameter("name");
String estimateBirth = request.getParameter("year");
String estimateCareer = request.getParameter("career");
String estimateEducation = request.getParameter("education");
String estimateCountry = request.getParameter("country");
String estimatePhone = request.getParameter("user_phone") + "-" + request.getParameter("phone_last");
String estimateEmail = request.getParameter("email") + "@" + request.getParameter("email_diract");



// MySQL 연결 정보 설정
String url = "jdbc:mysql://localhost:3306/recycle";
String user = "root";
String password = "znfntbt0!";

try {
    Class.forName("com.mysql.cj.jdbc.Driver");
    Connection conn = DriverManager.getConnection(url, user, password);

    // 쿼리 작성
    String insertQuery = "INSERT INTO your_table_name (name, age, email) VALUES (?, ?, ?)";
    PreparedStatement preparedStatement = conn.prepareStatement(insertQuery);
    preparedStatement.setString(1, userName);
    preparedStatement.setInt(2, userAge);
    preparedStatement.setString(3, userEmail);

    // 쿼리 실행
    int rowsAffected = preparedStatement.executeUpdate();

    if (rowsAffected > 0) {
        out.println("Data inserted successfully!"); // 성공 메시지
    } else {
        out.println("Failed to insert data!"); // 실패 메시지
    }

    preparedStatement.close();
    conn.close();
} catch (Exception e) {
    out.println("Error: " + e.getMessage()); // 오류 메시지 출력
}
%>
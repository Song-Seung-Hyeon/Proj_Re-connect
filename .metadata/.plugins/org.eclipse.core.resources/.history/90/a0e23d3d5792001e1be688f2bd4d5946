<%@ page import="javax.servlet.http.*,java.io.*,java.sql.*"%>
<%@ page import="java.sql.*, java.io.*"%>
<%@ page contentType="text/html;charset=UTF-8" language="java"%>
<%@ page import="javax.servlet.http.HttpSession"%>
<%
request.setCharacterEncoding("utf-8");
%>

<%
// JDBC 드라이버 로드
Class.forName("com.mysql.jdbc.Driver");

// MySQL 데이터베이스 연결 정보
String url = "jdbc:mysql://localhost:3306/recycle";
String username = "root";
String password = "znfntbt0!";

// 데이터베이스 연결
Connection conn = DriverManager.getConnection(url, username, password);

// 쿼리 실행
Statement stmt = conn.createStatement();
ResultSet rs = stmt.executeQuery("SELECT * FROM user_list");

// JavaScript로 데이터 전달
System.out.println("<script>");
System.out.println("var data = [];"); // JavaScript 배열 선언

while (rs.next()) {
	// 각 행의 값을 JavaScript 배열에 추가
	System.out.println("data.push('" + rs.getString("user_name") + "');");
}

System.out.println("console.log(data);"); // JavaScript 콘솔에 데이터 출력
System.out.println("</script>");

// 리소스 닫기
rs.close();
stmt.close();
conn.close();
%>